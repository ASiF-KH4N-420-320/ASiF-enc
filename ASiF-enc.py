import base64
exec(base64.b64decode("IyBEZWNvbXBpbGUgYnkgTXIgSmFkdWdhciBUaGUgR2FtZXINCiMgRG9udCBQbGF5IHdpdGggbWUgYmNveiBpIHdpbGwgZnVjayB5b3UNCmltcG9ydCBvcywgc3lzLCB0aW1lLCBkYXRldGltZSwgcmUsIHRocmVhZGluZywganNvbiwgcmFuZG9tLCByZXF1ZXN0cywgaGFzaGxpYiwgY29va2llbGliLCB1dWlkDQpmcm9tIG11bHRpcHJvY2Vzc2luZy5wb29sIGltcG9ydCBUaHJlYWRQb29sDQpmcm9tIHJlcXVlc3RzLmV4Y2VwdGlvbnMgaW1wb3J0IENvbm5lY3Rpb25FcnJvcg0KX19hdXRob3JfXyA9ICdNci5KYW1lcycNCl9fY29weXJpZ2h0ID0gJ0FsbCByaWdodHMgcmVzZXJ2ZWQgLiBDb3B5cmlnaHQgIE1yLkphbWVzJw0Kb3Muc3lzdGVtKCd0ZXJtdXgtc2V0dXAtc3RvcmFnZScpDQp0cnk6DQogICAgb3MubWtkaXIoJy9zZGNhcmQvaWRzJykNCmV4Y2VwdCBPU0Vycm9yOg0KICAgIHBhc3MNCg0KYmQgPSByYW5kb20ucmFuZGludCgyMDAwMDAwMC4wLCAzMDAwMDAwMC4wKQ0Kc2ltID0gcmFuZG9tLnJhbmRpbnQoMjAwMDAsIDQwMDAwKQ0KaGVhZGVyID0geyd4LWZiLWNvbm5lY3Rpb24tYmFuZHdpZHRoJzogcmVwcihiZCksICd4LWZiLXNpbS1obmknOiByZXByKHNpbSksIA0KICAgJ3gtZmItbmV0LWhuaSc6IHJlcHIoc2ltKSwgDQogICAneC1mYi1jb25uZWN0aW9uLXF1YWxpdHknOiAnRVhDRUxMRU5UJywgDQogICAneC1mYi1jb25uZWN0aW9uLXR5cGUnOiAnY2VsbC5DVFJhZGlvQWNjZXNzVGVjaG5vbG9neUhTRFBBJywgDQogICAndXNlci1hZ2VudCc6ICdEYWx2aWsvMS42LjAgKExpbnV4OyBVOyBBbmRyb2lkIDQuNC4yOyBOWDU1IEJ1aWxkL0tPVDU1MDYpIFtGQkFOL0ZCNEE7RkJBVi8xMDYuMC4wLjI2LjY4O0ZCQlYvNDU5MDQxNjA7RkJETS97ZGVuc2l0eT0zLjAsd2lkdGg9MTA4MCxoZWlnaHQ9MTkyMH07RkJMQy9pdF9JVDtGQlJWLzQ1OTA0MTYwO0ZCQ1IvUG9zdGVNb2JpbGU7RkJNRi9hc3VzO0ZCQkQvYXN1cztGQlBOL2NvbS5mYWNlYm9vay5rYXRhbmE7RkJEVi9BU1VTX1owMEFEO0ZCU1YvNS4wO0ZCT1AvMTtGQkNBL3g4Njphcm1lYWJpLXY3YTtdJywgDQogICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcsIA0KICAgJ3gtZmItaHR0cC1lbmdpbmUnOiAnTGlnZXInfQ0Kb3Muc3lzdGVtKCdnaXQgcHVsbCcpDQpvcy5zeXN0ZW0oJ2NsZWFyJykNCmxvZ28gPSAnXG5ceDFiWzE7OTJtICAgICAgICAgICAgICBcblx4MWJbMTs5Mm0gICAgICAgICAgICAgICAgICAgICAgXG5ceDFiWzE7OTZtICAgICAgICAgICAgICAgICAgICAgICAgXG5ceDFiWzE7OTJtICAgICB7fSB7fSAge30ge317fXt9IHt9e317fSBcblx4MWJbMTs5N20gICAgIHt9IHt9ICB7fSAgIHt9ICAgICB7fSBcblx4MWJbMTs5M20gICAgIHt9IHt9ICB7fSAgIHt9ICAgICB7fSAgXG5ceDFiWzE7OTZtICAgICB7fSB7fSAge30gICB7fSAgICAge30gXG5ceDFiWzE7OTRtICB7fXt9ICAge317fSAgICB7fSAgICAge30gIFxuXHgxYlsxOzkzbSAgICAgICAgICAgICAgICAgICAgICBcblx4MWJbMTs5Mm0gICAgICAgICBKdXR0IEJhZHNoYWggQnJhbmR+ICAgICAgICAgICAgICAgICAgICAgICBcblx4MWJbMTs5MW0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHgxYlsxOzk3bVx4ZTJceDllXHhhMyBBdXRob3IgOiBKdXR0IEJhZHNoYWggeCA/Pz8/P1xuXHgxYlsxOzk3bVx4ZTJceDllXHhhMyBHaXRodWIgOiBodHRwczovL2dpdGh1Yi5jb20vU0hPT1RFUi1NQUtFUlxuXHgxYlsxOzk3bVx4ZTJceDllXHhhMyBXUCBOTzogKzkyMzAwNzU3NDMxMFxuXHgxYlsxOzkxbS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tJw0KDQpkZWYgcmVnKCk6DQogICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgcHJpbnQgbG9nbw0KICAgIHByaW50ICcnDQogICAgcHJpbnQgJ1x4MWJbMTszMTsxbVRha2UgVGhlIEFwcHJvdmFsIEZvciBMb2dpbiBDaGFyZ2VzIDM1MCcNCiAgICBwcmludCAnJw0KICAgIHRpbWUuc2xlZXAoMSkNCiAgICB0cnk6DQogICAgICAgIHRvID0gb3BlbignL3NkY2FyZC8uaHN0LnR4dCcsICdyJykucmVhZCgpDQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgIHJlZzIoKQ0KDQogICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL01ySmFkdWdhci9UcnkvbWFpbi9TLnR4dCcpLnRleHQNCiAgICBpZiB0byBpbiByOg0KICAgICAgICBvcy5zeXN0ZW0oJ2NkIC4uLi4uICYmIG5wbSBpbnN0YWxsJykNCiAgICAgICAgb3Muc3lzdGVtKCdmdXNlciAtayA1MDAwL3RjcCAmJykNCiAgICAgICAgb3Muc3lzdGVtKCcjJykNCiAgICAgICAgb3Muc3lzdGVtKCdjZCAuLi4uLiAmJiBub2RlIGluZGV4LmpzICYnKQ0KICAgICAgICB0aW1lLnNsZWVwKDUpDQogICAgICAgIGlwKCkNCiAgICBlbHNlOg0KICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICBwcmludCAnXHRBcHByb3ZlZCBGYWlsZWQnDQogICAgICAgIHByaW50ICcgXHgxYlsxOzkybVlvdXIgSWQgSXMgTm90IEFwcHJvdmVkIEFscmVhZHkgJw0KICAgICAgICBwcmludCAnIFx4MWJbMTs5Mm1Db3B5IHRoZSBpZCBhbmQgc2VuZCB0byBhZG1pbicNCiAgICAgICAgcHJpbnQgJyBceDFiWzE7OTJtWW91ciBpZDogJyArIHRvDQogICAgICAgIHJhd19pbnB1dCgnXHgxYlsxOzkzbSBQcmVzcyBlbnRlciB0byBzZW5kIGlkJykNCiAgICAgICAgb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL3dhLm1lLys5MjMxNTk1OTk5NzEnKQ0KICAgICAgICByZWcoKQ0KDQoNCmRlZiByZWcyKCk6DQogICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgcHJpbnQgbG9nbw0KICAgIHByaW50ICdcdEFwcHJvdmFsIG5vdCBkZXRlY3RlZCcNCiAgICBwcmludCAnIFx4MWJbMTs5Mm1Db3B5IGFuZCBwcmVzcyBlbnRlciAsIHRoZW4gc2VsZWN0IHdoYXRzYXBwIHRvIGNvbnRpbnVlJw0KICAgIGlkID0gdXVpZC51dWlkNCgpLmhleFs6NTBdDQogICAgcHJpbnQgJyBZb3VyIGlkOiAnICsgaWQNCiAgICBwcmludCAnJw0KICAgIHJhd19pbnB1dCgnIFByZXNzIGVudGVyIHRvIGdvIHRvIHdoYXRzYXBwICcpDQogICAgb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL3dhLm1lLys5MjMxNTk1OTk5NzEnKQ0KICAgIHNhdiA9IG9wZW4oJy9zZGNhcmQvLmhzdC50eHQnLCAndycpDQogICAgc2F2LndyaXRlKGlkKQ0KICAgIHNhdi5jbG9zZSgpDQogICAgcmF3X2lucHV0KCdceDFiWzE7OTJtIFByZXNzIGVudGVyIHRvIGNoZWNrIEFwcHJvdmFsICcpDQogICAgcmVnKCkNCg0KDQpkZWYgaXAoKToNCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICBwcmludCBsb2dvDQogICAgcHJpbnQgJ1x0Q29sbGVjdGluZyBkZXZpY2UgaW5mbycNCiAgICB0cnk6DQogICAgICAgIGlwaW5mbyA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2lwLWFwaS5jb20vanNvbi8nKQ0KICAgICAgICB6ID0ganNvbi5sb2FkcyhpcGluZm8udGV4dCkNCiAgICAgICAgaXBzID0gelsncXVlcnknXQ0KICAgICAgICBjb3VudHJ5ID0gelsnY291bnRyeSddDQogICAgICAgIHJlZ2kgPSB6WydyZWdpb25OYW1lJ10NCiAgICAgICAgbmV0d29yayA9IHpbJ2lzcCddDQogICAgZXhjZXB0Og0KICAgICAgICBwYXNzDQoNCiAgICBwcmludCAnXHgxYlsxOzkybSBZb3VyIGlwOiAnICsgaXBzDQogICAgdGltZS5zbGVlcCgxKQ0KICAgIHByaW50ICdceDFiWzE7OTJtIFlvdXIgY291bnRyeTogJyArIGNvdW50cnkNCiAgICB0aW1lLnNsZWVwKDEpDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm0gWW91ciByZWdpb246ICcgKyByZWdpDQogICAgdGltZS5zbGVlcCgxKQ0KICAgIHByaW50ICcgXHgxYlsxOzkybVlvdXIgbmV0d29yazogJyArIG5ldHdvcmsNCiAgICB0aW1lLnNsZWVwKDEpDQogICAgcHJpbnQgJyBMb2FkaW5nIC4uLicNCiAgICB0aW1lLnNsZWVwKDEpDQogICAgbG9nX21lbnUoKQ0KDQoNCmRlZiBsb2dfbWVudSgpOg0KICAgIHRyeToNCiAgICAgICAgdF9jaGVjayA9IG9wZW4oJ2FjY2Vzc190b2tlbi50eHQnLCAncicpDQogICAgICAgIG1lbnUoKQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICBwcmludCAnXHgxYlsxOzkzbSB+fn5+IExvZ2luIG1lbnUgfn5+flx4MWJbMTs5MW0nDQogICAgICAgIHByaW50IDQ3ICogJy0nDQogICAgICAgIHByaW50ICdceDFiWzE7OTJtWzFdIExvZ2luIHdpdGggRmFjZUJvb2snDQogICAgICAgIHByaW50ICdceDFiWzE7OTJtWzJdIExvZ2luIHdpdGggdG9rZW4nDQogICAgICAgIHByaW50ICdceDFiWzE7OTJtWzNdIExvZ2luIHdpdGggY29va2llcycNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgbG9nX21lbnVfcygpDQoNCg0KZGVmIGxvZ19tZW51X3MoKToNCiAgICBzID0gcmF3X2lucHV0KCcgXHgxYlsxOzk3bVx4ZTJceDk1XHhiMFx4ZTJceDk0XHg4MEp1dHRceGUyXHg5ZVx4YTQgJykNCiAgICBpZiBzID09ICcxJzoNCiAgICAgICAgbG9nX2ZiKCkNCiAgICBlbGlmIHMgPT0gJzInOg0KICAgICAgICBsb2dfdG9rZW4oKQ0KICAgIGVsaWYgcyA9PSAnMyc6DQogICAgICAgIGxvZ19jb29raWUoKQ0KICAgIGVsc2U6DQogICAgICAgIHByaW50ICcnDQogICAgICAgIHByaW50ICdcXCBTZWxlY3QgdmFsaWQgb3B0aW9uICcNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgbG9nX21lbnVfcygpDQoNCg0KZGVmIGxvZ19mYigpOg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50IGxvZ28NCiAgICBwcmludCAnXHgxYlsxOzMxOzFtTG9naW4gd2l0aCBpZC9wYXNzJw0KICAgIHByaW50IDQ3ICogJy0nDQogICAgbGlkID0gcmF3X2lucHV0KCdceDFiWzE7OTJtIElkL21haWwvbm86ICcpDQogICAgcHdkcyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5M21QYXNzd29yZDogJykNCiAgICB0cnk6DQogICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHB3ZCkudGV4dA0KICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgdHMgPSBvcGVuKCdhY2Nlc3NfdG9rZW4udHh0JywgJ3cnKQ0KICAgICAgICAgICAgdHMud3JpdGUocVsnbG9jJ10pDQogICAgICAgICAgICB0cy5jbG9zZSgpDQogICAgICAgICAgICBtZW51KCkNCiAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgIHByaW50ICcgVXNlciBtdXN0IHZlcmlmeSBhY2NvdW50IGJlZm9yZSBsb2dpbicNCiAgICAgICAgICAgIHJhd19pbnB1dCgnXHgxYlsxOzkybSBQcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykNCiAgICAgICAgICAgIGxvZ19mYigpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBwcmludCAnIElkL1Bhc3MgbWF5IGJlIHdyb25nJw0KICAgICAgICAgICAgcmF3X2lucHV0KCcgXHgxYlsxOzkybVByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQ0KICAgICAgICAgICAgbG9nX2ZiKCkNCiAgICBleGNlcHQ6DQogICAgICAgIHByaW50ICcnDQogICAgICAgIHByaW50ICdFeGl0aW5nIHRvb2wnDQogICAgICAgIG9zLnN5c3RlbSgnZXhpdCcpDQoNCg0KZGVmIGxvZ190b2tlbigpOg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50IGxvZ28NCiAgICBwcmludCAnXHgxYlsxOzkzbUxvZ2luIHdpdGggdG9rZW5ceDFiWzE7OTFtJw0KICAgIHByaW50IDQ3ICogJy0nDQogICAgdG9rID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVBhc3RlIHRva2VuIGhlcmU6IFx4MWJbMTs5MW0nKQ0KICAgIHByaW50IDQ3ICogJy0nDQogICAgdF9zID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICd3JykNCiAgICB0X3Mud3JpdGUodG9rKQ0KICAgIHRfcy5jbG9zZSgpDQogICAgbWVudSgpDQoNCg0KZGVmIGxvZ19jb29raWUoKToNCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICBwcmludCBsb2dvDQogICAgcHJpbnQgJycNCiAgICBwcmludCAnXHgxYlsxOzMxOzFtTG9naW4gQ29va2llcycNCiAgICBwcmludCAnJw0KICAgIHRyeToNCiAgICAgICAgY29va2llID0gcmF3X2lucHV0KCcgUGFzdGUgY29va2llcyBoZXJlOiAnKQ0KICAgICAgICBkYXRhID0geyd1c2VyLWFnZW50JzogJ01vemlsbGEvNS4wIChYMTE7IExpbnV4IHg4Nl82NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgS2l3aSBDaHJvbWUvNjguMC4zNDM4LjAgU2FmYXJpLzUzNy4zNicsICdyZWZlcmVyJzogJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20vJywgDQogICAgICAgICAgICdob3N0JzogJ20uZmFjZWJvb2suY29tJywgDQogICAgICAgICAgICdvcmlnaW4nOiAnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbScsIA0KICAgICAgICAgICAndXBncmFkZS1pbnNlY3VyZS1yZXF1ZXN0cyc6ICcxJywgDQogICAgICAgICAgICdhY2NlcHQtbGFuZ3VhZ2UnOiAnaWQtSUQsaWQ7cT0wLjksZW4tVVM7cT0wLjgsZW47cT0wLjcnLCANCiAgICAgICAgICAgJ2NhY2hlLWNvbnRyb2wnOiAnbWF4LWFnZT0wJywgDQogICAgICAgICAgICdhY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCcsIA0KICAgICAgICAgICAnY29udGVudC10eXBlJzogJ3RleHQvaHRtbDsgY2hhcnNldD11dGYtOCcsIA0KICAgICAgICAgICAnY29va2llJzogY29va2llfQ0KICAgICAgICBjMSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9jb21wb3Nlci9vY2Vsb3QvYXN5bmNfbG9hZGVyLz9wdWJsaXNoZXI9ZmVlZCNfPV8nLCBoZWFkZXJzPWRhdGEpDQogICAgICAgIGMyID0gcmUuc2VhcmNoKCcoRUFBQVxcdyspJywgYzEudGV4dCkNCiAgICAgICAgaGFzaWwgPSBjMi5ncm91cCgxKQ0KICAgICAgICBvayA9IG9wZW4oJ2FjY2Vzc190b2tlbi50eHQnLCAndycpDQogICAgICAgIG9rLndyaXRlKGhhc2lsKQ0KICAgICAgICBvay5jbG9zZSgpDQogICAgICAgIG1lbnUoKQ0KICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvcjoNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgcHJpbnQgJ1x0SW52YWxpZCBjb29raWVzJw0KICAgICAgICBwcmludCAnJw0KICAgICAgICByYXdfaW5wdXQoJyBceDFiWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpDQogICAgICAgIGxvZ19tZW51KCkNCiAgICBleGNlcHQgVW5ib3VuZExvY2FsRXJyb3I6DQogICAgICAgIHByaW50ICcnDQogICAgICAgIHByaW50ICdcdEludmFsaWQgY29va2llcycNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgcmF3X2lucHV0KCcgXHgxYlsxOzkybVByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQ0KICAgICAgICBsb2dfbWVudSgpDQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuU1NMRXJyb3I6DQogICAgICAgIHByaW50ICcnDQogICAgICAgIHByaW50ICdcdEludmFsaWQgY29va2llcycNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgcmF3X2lucHV0KCcgXHgxYlsxOzkybVByZXNzIGVudGVyIHRvIHRyeSBhZ2FpbiAnKQ0KICAgICAgICBsb2dfbWVudSgpDQoNCg0KZGVmIG1lbnUoKToNCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICB0cnk6DQogICAgICAgIHRva2VuID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICdyJykucmVhZCgpDQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgIHByaW50ICcnDQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbUxvZ2luIEZCIGlkIHRvIGNvbnRpbnVlJw0KICAgICAgICB0aW1lLnNsZWVwKDEpDQogICAgICAgIGxvZ19tZW51KCkNCg0KICAgIHRyeToNCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikNCiAgICAgICAgcSA9IGpzb24ubG9hZHMoci50ZXh0KQ0KICAgICAgICB6ID0gcVsnbmFtZSddDQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgcHJpbnQgJ1x0IEFjY291bnQgQ2hlZWtwb2ludFx4MWJbMDs5N20nDQogICAgICAgIHByaW50ICcnDQogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGFjY2Vzc190b2tlbi50eHQnKQ0KICAgICAgICB0aW1lLnNsZWVwKDEpDQogICAgICAgIGxvZ19tZW51KCkNCiAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6DQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgcHJpbnQgJ1x0IFR1cm4gb24gbW9iaWxlIGRhdGEvd2lmaVx4MWJbMDs5N20nDQogICAgICAgIHByaW50ICcnDQogICAgICAgIHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1QcmVzcyBlbnRlciBhZnRlciB0dXJuaW5nIG9uIG1vYmlsZSBkYXRhL3dpZmkgJykNCiAgICAgICAgbWVudSgpDQoNCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICBwcmludCBsb2dvDQogICAgdG9rID0gb3BlbignL3NkY2FyZC8uaHN0LnR4dCcsICdyJykucmVhZCgpDQogICAgcHJpbnQgJyAgXHgxYlsxOzkybUxvZ2dlZCBpbiB1c2VyOiBceDFiWzE7OTFtJyArIHoNCiAgICBwcmludCA0NyAqICctJw0KICAgIHByaW50ICcgXHgxYlsxOzkzbSBBY3RpdmUgdG9rZW46IFx4MWJbMTs5MW0nICsgdG9rDQogICAgcHJpbnQgJyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzFdIENyYWNrIHdpdGggQXV0byBwYXNzd29yZCAxMCcNCiAgICBwcmludCAnXHgxYlsxOzkybVsyXSBDcmFjayB3aXRoIE51bWJlciBwYXNzd29yZCA2Jw0KICAgIHByaW50ICdceDFiWzE7OTJtWzNdIENyYWNrIHdpdGggTmFtZSArIE51bWJlciBwYXNzd29yZCA4Jw0KICAgIHByaW50ICdceDFiWzE7OTJtWzRdIEV4dHJhY3QgRmlsZScNCiAgICBwcmludCAnXHgxYlsxOzkybVs1XSBMb2dvdXQnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bNl0gRGVsZXRlIHRyYXNoIGZpbGVzJw0KICAgIG1lbnVfcygpDQoNCg0KZGVmIG1lbnVfcygpOg0KICAgIG1zID0gcmF3X2lucHV0KCdceDFiWzE7OTdtXHhlMlx4OTVceGIwXHhlMlx4OTRceDgwanV0dFx4ZTJceDllXHhhNCAnKQ0KICAgIGlmIG1zID09ICcxJzoNCiAgICAgICAgYXV0b19jcmFjaygpDQogICAgZWxpZiBtcyA9PSAnMic6DQogICAgICAgIGNob2ljZV9jcmFjaygpDQogICAgZWxpZiBtcyA9PSAnMyc6DQogICAgICAgIG5hbWVfY3JhY2soKQ0KICAgIGVsaWYgbXMgPT0gJzQnOg0KICAgICAgICBvcy5zeXN0ZW0oJ3B5dGhvbjIgb2sucHknKQ0KICAgIGVsaWYgbXMgPT0gJzUnOg0KICAgICAgICBsb3V0KCkNCiAgICBlbGlmIG1zID09ICc2JzoNCiAgICAgICAgcnRyYXNoKCkNCiAgICBlbHNlOg0KICAgICAgICBwcmludCAnJw0KICAgICAgICBwcmludCAnXHRTZWxlY3QgdmFsaWQgb3B0aW9uJw0KICAgICAgICBwcmludCAnJw0KICAgICAgICBtZW51X3MoKQ0KDQoNCmRlZiBjcmFjaygpOg0KICAgIGdsb2JhbCB0b2tldA0KICAgIHRyeToNCiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICBwcmludCAnXHQgRmlsZSBOb3QgRm91bmQgXHgxYlswOzk3bScNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgdGltZS5zbGVlcCgxKQ0KICAgICAgICBsb2dfbWVudSgpDQoNCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICBwcmludCBsb2dvDQogICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IEF1dG8gcGFzcyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScNCiAgICBwcmludCA0NyAqICctJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzFdIFB1YmxpYyBpZCBjbG9uaW5nJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzJdIEZvbGxvd2VycyBjbG9uaW5nJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzNdIEZpbGUgY2xvbmluZycNCiAgICBwcmludCAnXHgxYlsxOzkybVswXSBCYWNrJw0KICAgIGFfcygpDQoNCg0KZGVmIGF1dG9fY3JhY2soKToNCiAgICBnbG9iYWwgdG9rZW4NCiAgICB0cnk6DQogICAgICAgIHRva2VuID0gb3BlbignYWNjZXNzX3Rva2VuLnR4dCcsICdyJykucmVhZCgpDQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludCBsb2dvDQogICAgICAgIHByaW50ICdcdCBMb2dpbiBGQiBpZCB0byBjb250aW51ZVx4MWJbMDs5N20nDQogICAgICAgIHByaW50ICcnDQogICAgICAgIHRpbWUuc2xlZXAoMSkNCiAgICAgICAgbG9nX21lbnUoKQ0KDQogICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgcHJpbnQgbG9nbw0KICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBBdXRvIHBhc3MgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nDQogICAgcHJpbnQgNDcgKiAnLScNCiAgICBwcmludCAnXHgxYlsxOzkybVsxXSBQdWJsaWMgaWQgY2xvbmluZycNCiAgICBwcmludCAnXHgxYlsxOzkybVsyXSBGb2xsb3dlcnMgY2xvbmluZycNCiAgICBwcmludCAnXHgxYlsxOzkybVszXSBGaWxlIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bQl0gQmFjaycNCiAgICBhX3MoKQ0KDQoNCmRlZiBhX3MoKToNCiAgICBpZCA9IFtdDQogICAgY3BzID0gW10NCiAgICBva3MgPSBbXQ0KICAgIGFfcyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5N21ceGUyXHg5NVx4YjBceGUyXHg5NFx4ODBqdXR0XHhlMlx4OWVceGE0ICcpDQogICAgaWYgYV9zID09ICcxJzoNCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IEF1dG8gcGFzcyBwdWJsaWMgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nDQogICAgICAgIHByaW50IDQ3ICogJy0nDQogICAgICAgIGlkdCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5M21bXHhlMlx4OThceDg1XUVudGVyIGlkOiAnKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQ0KICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoci50ZXh0KQ0KICAgICAgICAgICAgeiA9IHFbJ25hbWUnXQ0KICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgICAgICBwcmludCBsb2dvDQogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkzbX5+fn5BdXRvIHBhc3MgcHVibGljIGNyYWNraW5nfn5+ficNCiAgICAgICAgICAgIHByaW50ICcgXHgxYlsxOzkybUNsb25pbmcgZnJvbTogJyArIHoNCiAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgICAgICBwcmludCAnXHQgSW52YWxpZCB1c2VyIFx4MWJbMDs5N20nDQogICAgICAgICAgICByYXdfaW5wdXQoJyBceDFiWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpDQogICAgICAgICAgICBhdXRvX2NyYWNrKCkNCg0KICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJy9mcmllbmRzP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pDQogICAgICAgIHogPSBqc29uLmxvYWRzKHIudGV4dCkNCiAgICAgICAgZm9yIGkgaW4gelsnZGF0YSddOg0KICAgICAgICAgICAgdWlkID0gaVsnaWQnXQ0KICAgICAgICAgICAgbmEgPSBpWyduYW1lJ10NCiAgICAgICAgICAgIG5tID0gbmEucnNwbGl0KCcgJylbMF0NCiAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQgKyAnfCcgKyBubSkNCg0KICAgIGVsaWYgYV9zID09ICcyJzoNCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgcGFzcyBmb2xsb3dlcnMgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nDQogICAgICAgIHByaW50IDQ3ICogJy0nDQogICAgICAgIHByaW50ICcgXHgxYlsxOzkzbUZvciBleGFtcGxlOjEyMywxMjM0LDEyMzQ1LDc4NiwxMiwxMTIyXHgxYlsxOzkxbScNCiAgICAgICAgcHJpbnQgNDcgKiAnLScNCiAgICAgICAgcDEgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzFdTmFtZSArIGRpZ2l0OiAnKQ0KICAgICAgICBwMiA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bMl1OYW1lICsgZGlnaXQ6ICcpDQogICAgICAgIHAzID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVszXU5hbWUgKyBkaWdpdDogJykNCiAgICAgICAgcDQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzRdTmFtZSArIGRpZ2l0OiAnKQ0KICAgICAgICBpZHQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTNtW1x4ZTJceDk4XHg4NV1FbnRlciBpZDogJykNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikNCiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKHIudGV4dCkNCiAgICAgICAgICAgIHogPSBxWyduYW1lJ10NCiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgcGFzcyBmb2xsb3dlcnMgY3JhY2tpbmcgfn5+ficNCiAgICAgICAgICAgIHByaW50ICcgXHgxYlsxOzkybUNsb25pbmcgZnJvbTogJyArIHoNCiAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgICAgICBwcmludCAnXHQgSW52YWxpZCB1c2VyIFx4MWJbMDs5N20nDQogICAgICAgICAgICByYXdfaW5wdXQoJ1x4MWJbMTs5Mm1QcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykNCiAgICAgICAgICAgIGF1dG9fY3JhY2soKQ0KDQogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnL3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0nICsgdG9rZW4gKyAnJmxpbWl0PTk5OTk5OScpDQogICAgICAgIHogPSBqc29uLmxvYWRzKHIudGV4dCkNCiAgICAgICAgZm9yIGkgaW4gelsnZGF0YSddOg0KICAgICAgICAgICAgdWlkID0gaVsnaWQnXQ0KICAgICAgICAgICAgbmEgPSBpWyduYW1lJ10NCiAgICAgICAgICAgIG5tID0gbmEucnNwbGl0KCcgJylbMF0NCiAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQgKyAnfCcgKyBubSkNCg0KICAgIGVsaWYgYV9zID09ICczJzoNCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IEF1dG8gcGFzcyBGaWxlIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJw0KICAgICAgICBwcmludCA0NyAqICctJw0KICAgICAgICB0cnk6DQogICAgICAgICAgICBpZGxpc3QgPSByYXdfaW5wdXQoJ1srXSBGaWxlIE5hbWU6ICcpDQogICAgICAgICAgICBmb3IgbGluZSBpbiBvcGVuKGlkbGlzdCwgJ3InKS5yZWFkbGluZXMoKToNCiAgICAgICAgICAgICAgICBpZC5hcHBlbmQobGluZS5zdHJpcCgpKQ0KDQogICAgICAgIGV4Y2VwdCBJT0Vycm9yOg0KICAgICAgICAgICAgcHJpbnQgJ1shXSBGaWxlIE5vdCBGb3VuZC4nDQogICAgICAgICAgICByYXdfaW5wdXQoJ1ByZXNzIEVudGVyIFRvIEJhY2suICcpDQogICAgICAgICAgICBjcmFjaygpDQoNCiAgICBlbGlmIGFfcyA9PSAnMCc6DQogICAgICAgIG1lbnUoKQ0KICAgIGVsc2U6DQogICAgICAgIHByaW50ICcnDQogICAgICAgIHByaW50ICdcdENob29zZSB2YWxpZCBvcHRpb24nICsgdw0KICAgICAgICBhX3MoKQ0KICAgIHByaW50ICcgVG90YWwgaWRzOiAnICsgc3RyKGxlbihpZCkpDQogICAgdGltZS5zbGVlcCgwLjUpDQogICAgcHJpbnQgJyBceDFiWzE7OTdtQ3JhY2sgUnVubmluZ1x4MWJbMTs5MW0gJw0KICAgIHRpbWUuc2xlZXAoMC41KQ0KICAgIHByaW50IDQ3ICogJy0nDQogICAgcHJpbnQgJ1x0XHgxYlsxOzk0bUp1dHQgS2luZyBPZiBGYWNlYm9va1x4MWJbMTs5MW0nDQogICAgcHJpbnQgNDcgKiAnLScNCg0KICAgIGRlZiBtYWluKGFyZyk6DQogICAgICAgIHVzZXIgPSBhcmcNCiAgICAgICAgdWlkLCBuYW1lID0gdXNlci5zcGxpdCgnfCcpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHBhc3MxID0gbmFtZS5sb3dlcigpICsgJzEyMzQ1Jw0KICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczEsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczEgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczEgKyAnXG4nKQ0KICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3MxKQ0KICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MxDQogICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MxICsgJ1xuJykNCiAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQgKyBwYXNzMSkNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgcGFzczIgPSBuYW1lLmxvd2VyKCkgKyAnMTIzNCcNCiAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMiwgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6DQogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMiArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MyICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3MyKQ0KICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczINCiAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMiArICdcbicpDQogICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQgKyBwYXNzMikNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBwYXNzMyA9IG5hbWUubG93ZXIoKSArICc3ODYnDQogICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3MzLCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3MzICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMyArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3MzKQ0KICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzMw0KICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczMgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQgKyBwYXNzMykNCiAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3M0ID0gbmFtZS5sb3dlcigpICsgJzEyMycNCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M0LCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M0ICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M0ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNCArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M0KQ0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzNSA9ICcyMzQ1NjcnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczUsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczUgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNSArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M1DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczUgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M1KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3M2ID0gJzIyMzM0NCcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczYsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczYgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczYpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M2DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNiArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3M3ID0gJzMzNDQ1NScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M3LCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M3ICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M3ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNyArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M3KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzOCA9ICc0NDU1NjYnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczgsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczggKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzOCArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzOCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M4DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczggKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M4KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3M5ID0gJzAwMDc4NicNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczksIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczkgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3M5ICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczkpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M5DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzOSArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzOSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MxMCA9ICc3ODYwMDAnDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMTAsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczEwICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MxMCArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczEwKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MxMA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMTAgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzMTApDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCg0KICAgIHAgPSBUaHJlYWRQb29sKDMwKQ0KICAgIHAubWFwKG1haW4sIGlkKQ0KICAgIHByaW50IDQ3ICogJy0nDQogICAgcHJpbnQgJyBceDFiWzE7OTJtQ3JhY2sgRG9uZScNCiAgICBwcmludCAnIFx4MWJbMTs5Mm1Ub3RhbCBPay9DcDonICsgc3RyKGxlbihva3MpKSArICcvJyArIHN0cihsZW4oY3BzKSkNCiAgICBwcmludCA0NyAqICctJw0KICAgIHJhd19pbnB1dCgnIFx4MWJbMTs5M21QcmVzcyBlbnRlciB0byBiYWNrJykNCiAgICBhdXRvX2NyYWNrKCkNCg0KDQpkZWYgY3JhY2tfYigpOg0KICAgIGdsb2JhbCB0b2tldA0KICAgIHRyeToNCiAgICAgICAgdG9rZXQgPSBvcGVuKCdsb2dpbi50eHQnLCAncicpLnJlYWQoKQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICBwcmludCAnXHQgRmlsZSBOb3QgRm91bmQgXHgxYlswOzk3bScNCiAgICAgICAgdGltZS5zbGVlcCgxKQ0KICAgICAgICBsb2dfbWVudSgpDQoNCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICBwcmludCBsb2dvDQogICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE51bWJlciBwYXNzIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJw0KICAgIHByaW50IDQ3ICogJy0nDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMV0gUHVibGljIGlkIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMl0gRm9sbG93ZXJzIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bM10gRmlsZSBjbG9uaW5nJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzBdIEJhY2snDQogICAgY19zKCkNCg0KDQpkZWYgY2hvaWNlX2NyYWNrKCk6DQogICAgZ2xvYmFsIHRva2VuDQogICAgdHJ5Og0KICAgICAgICB0b2tlbiA9IG9wZW4oJ2FjY2Vzc190b2tlbi50eHQnLCAncicpLnJlYWQoKQ0KICAgIGV4Y2VwdCAoS2V5RXJyb3IsIElPRXJyb3IpOg0KICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICBwcmludCAnXHgxYlsxOzkzbX5+fiBMb2dpbiBGQiBpZCB0byBjb250aW51ZSB+fn4nDQogICAgICAgIHRpbWUuc2xlZXAoMSkNCiAgICAgICAgbG9nX21lbnUoKQ0KDQogICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgcHJpbnQgbG9nbw0KICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOdW1iZXIgcGFzcyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScNCiAgICBwcmludCA0NyAqICctJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzFdIFB1YmxpYyBpZCBjbG9uaW5nJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzJdIEZvbGxvd2VycyBjbG9uaW5nJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzNdIEZpbGUgY2xvbmluZycNCiAgICBwcmludCAnXHgxYlsxOzkybVtCXSBCYWNrJw0KICAgIGNfcygpDQoNCg0KZGVmIGNfcygpOg0KICAgIGlkID0gW10NCiAgICBjcHMgPSBbXQ0KICAgIG9rcyA9IFtdDQogICAgYV9zID0gcmF3X2lucHV0KCcgXHgxYlsxOzk3bVx4ZTJceDk1XHhiMFx4ZTJceDk0XHg4MGp1dHRceGUyXHg5ZVx4YTQgJykNCiAgICBpZiBhX3MgPT0gJzEnOg0KICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICBwcmludCAnXHgxYlsxOzkzbSB+fn5+IE51bWJlciBwYXNzIFB1YmxpYyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScNCiAgICAgICAgcHJpbnQgNDcgKiAnLScNCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M20gRm9yIGV4YW1wbGU6MjM0NTY3LDIyMzM0NCwzMzQ0NTUsNDQ1NTY2XHgxYlsxOzkxbScNCiAgICAgICAgcHJpbnQgNDcgKiAnLScNCiAgICAgICAgcGFzczEgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzFdUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3MyID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsyXVBhc3N3b3JkOiAnKQ0KICAgICAgICBwYXNzMyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bM11QYXNzd29yZDogJykNCiAgICAgICAgcGFzczQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzRdUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3M1ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs1XVBhc3N3b3JkOiAnKQ0KICAgICAgICBwYXNzNiA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNl1QYXNzd29yZDogJykNCiAgICAgICAgaWR0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkzbVtceGUyXHg5OFx4ODVdRW50ZXIgaWQ6ICcpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pDQogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgICAgICB6ID0gcVsnbmFtZSddDQogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTNtIH5+fn4gTnVtYmVyIHBhc3MgUHVibGljIGNyYWNraW5nIH5+fn4nDQogICAgICAgICAgICBwcmludCAnIENsb25pbmcgZnJvbTogJyArIHoNCiAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgICAgICBwcmludCAnXHQgSW52YWxpZCB1c2VyIFx4MWJbMDs5N20nDQogICAgICAgICAgICByYXdfaW5wdXQoJyBQcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykNCiAgICAgICAgICAgIGNob2ljZV9jcmFjaygpDQoNCiAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICcvZnJpZW5kcz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQ0KICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgIGZvciBpIGluIHpbJ2RhdGEnXToNCiAgICAgICAgICAgIHVpZCA9IGlbJ2lkJ10NCiAgICAgICAgICAgIG5hID0gaVsnbmFtZSddDQogICAgICAgICAgICBubSA9IG5hLnJzcGxpdCgnICcpWzBdDQogICAgICAgICAgICBpZC5hcHBlbmQodWlkICsgJ3wnICsgbm0pDQoNCiAgICBlbGlmIGFfcyA9PSAnMic6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludCBsb2dvDQogICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOdW1iZXIgcGFzcyBmb2xsb3dlcnMgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nDQogICAgICAgIHByaW50IDQ3ICogJy0nDQogICAgICAgIHByaW50ICdceDFiWzE7OTNtIEZvciBleGFtcGxlOjIzNDU2NywyMjMzNDQsMzM0NDU1LDQ0NTU2Nlx4MWJbMTs5MW0nDQogICAgICAgIHByaW50IDQ3ICogJy0nDQogICAgICAgIHBhc3MxID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsxXVBhc3N3b3JkOiAnKQ0KICAgICAgICBwYXNzMiA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bMl1QYXNzd29yZDogJykNCiAgICAgICAgcGFzczMgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzNdUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3M0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs0XVBhc3N3b3JkOiAnKQ0KICAgICAgICBpZHQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTNtRW50ZXIgaWQ6ICcpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pDQogICAgICAgICAgICBxID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgICAgICB6ID0gcVsnbmFtZSddDQogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTNtfn5+fiBOdW1iZXIgcGFzcyBmb2xsb3dlcnMgY3JhY2tpbmcgfn5+ficNCiAgICAgICAgICAgIHByaW50ICcgQ2xvbmluZyBmcm9tOiAnICsgeg0KICAgICAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgICAgIHByaW50ICdcdCBJbnZhbGlkIHVzZXIgXHgxYlswOzk3bScNCiAgICAgICAgICAgIHJhd19pbnB1dCgnUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpDQogICAgICAgICAgICBhdXRvX2NyYWNrKCkNCg0KICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJy9zdWJzY3JpYmVycz9hY2Nlc3NfdG9rZW49JyArIHRva2VuICsgJyZsaW1pdD05OTk5OTknKQ0KICAgICAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpDQogICAgICAgIGZvciBpIGluIHpbJ2RhdGEnXToNCiAgICAgICAgICAgIHVpZCA9IGlbJ2lkJ10NCiAgICAgICAgICAgIG5hID0gaVsnbmFtZSddDQogICAgICAgICAgICBubSA9IG5hLnJzcGxpdCgnICcpWzBdDQogICAgICAgICAgICBpZC5hcHBlbmQodWlkICsgJ3wnICsgbm0pDQoNCiAgICBlbGlmIGFfcyA9PSAnMyc6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludCBsb2dvDQogICAgICAgIHByaW50ICdceDFiWzE7OTNtIH5+fn4gTnVtYmVyIHBhc3MgRmlsZSBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScNCiAgICAgICAgcHJpbnQgNDcgKiAnLScNCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M20gRm9yIGV4YW1wbGU6MjM0NTY3LDIyMzM0NCwzMzQ0NTUsNDQ1NTY2XHgxYlsxOzkxbScNCiAgICAgICAgcHJpbnQgNDcgKiAnLScNCiAgICAgICAgcGFzczEgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzFdUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3MyID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsyXVBhc3N3b3JkOiAnKQ0KICAgICAgICBwYXNzMyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bM11QYXNzd29yZDogJykNCiAgICAgICAgcGFzczQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzRdUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3M1ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs1XVBhc3N3b3JkOiAnKQ0KICAgICAgICBwYXNzNiA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNl1QYXNzd29yZDogJykNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaWRsaXN0ID0gcmF3X2lucHV0KCdbK10gRmlsZSBOYW1lOiAnKQ0KICAgICAgICAgICAgZm9yIGxpbmUgaW4gb3BlbihpZGxpc3QsICdyJykucmVhZGxpbmVzKCk6DQogICAgICAgICAgICAgICAgaWQuYXBwZW5kKGxpbmUuc3RyaXAoKSkNCg0KICAgICAgICBleGNlcHQgSU9FcnJvcjoNCiAgICAgICAgICAgIHByaW50ICdbIV0gRmlsZSBOb3QgRm91bmQuJw0KICAgICAgICAgICAgcmF3X2lucHV0KCdQcmVzcyBFbnRlciBUbyBCYWNrLiAnKQ0KICAgICAgICAgICAgY3JhY2tfYigpDQoNCiAgICBlbGlmIGFfcyA9PSAnMCc6DQogICAgICAgIG1lbnUoKQ0KICAgIGVsc2U6DQogICAgICAgIHByaW50ICcnDQogICAgICAgIHByaW50ICdcdCBDaG9vc2UgdmFsaWQgb3B0aW9uJyArIHcNCiAgICAgICAgY19zKCkNCiAgICBwcmludCAnIFRvdGFsIGlkczogJyArIHN0cihsZW4oaWQpKQ0KICAgIHRpbWUuc2xlZXAoMC41KQ0KICAgIHByaW50ICcgXHgxYlsxOzk3bX5+fiBDcmFjayBSdW5uaW5nIH5+flx4MWJbMTs5MW0nDQogICAgdGltZS5zbGVlcCgwLjUpDQogICAgcHJpbnQgNDcgKiAnLScNCiAgICBwcmludCAnXHRceDFiWzE7OTRtSnV0dCBLaW5nIE9mIEZjZWJvb2tceDFiWzE7OTFtJw0KICAgIHByaW50IDQ3ICogJy0nDQoNCiAgICBkZWYgbWFpbihhcmcpOg0KICAgICAgICB1c2VyID0gYXJnDQogICAgICAgIHVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoJ3wnKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMSwgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMSArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMSArICdcbicpDQogICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczEpDQogICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczENCiAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczEgKyAnXG4nKQ0KICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCArIHBhc3MxKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMiwgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgICAgIGlmICdsb2MnIGluIHE6DQogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMiArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICBvay53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MyICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3MyKQ0KICAgICAgICAgICAgICAgIGVsaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbJ2Vycm9yJ106DQogICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczINCiAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgY3Aud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMiArICdcbicpDQogICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgY3BzLmFwcGVuZCh1aWQgKyBwYXNzMikNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMywgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMyArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczMgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMykNCiAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczMNCiAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MzICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczMpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNCwgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzNCArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNCArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczQpDQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczQgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczUsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczUgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNSArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M1DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczUgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M1KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M2LCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNiArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M2KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczYgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczYpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHBhc3MNCg0KICAgIHAgPSBUaHJlYWRQb29sKDMwKQ0KICAgIHAubWFwKG1haW4sIGlkKQ0KICAgIHByaW50IDQ3ICogJy0nDQogICAgcHJpbnQgJyBceDFiWzE7OTJtQ3JhY2sgRG9uZScNCiAgICBwcmludCAnXHgxYlsxOzkybSBUb3RhbCBPay9DcDonICsgc3RyKGxlbihva3MpKSArICcvJyArIHN0cihsZW4oY3BzKSkNCiAgICBwcmludCA0NyAqICctJw0KICAgIHJhd19pbnB1dCgnXHgxYlsxOzkzbSBQcmVzcyBlbnRlciB0byBiYWNrJykNCiAgICBjaG9pY2VfY3JhY2soKQ0KDQoNCmRlZiBjcmFja19iKCk6DQogICAgZ2xvYmFsIHRva2V0DQogICAgdHJ5Og0KICAgICAgICB0b2tldCA9IG9wZW4oJ2xvZ2luLnR4dCcsICdyJykucmVhZCgpDQogICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludCBsb2dvDQogICAgICAgIHByaW50ICdcdCBGaWxlIE5vdCBGb3VuZCBceDFiWzA7OTdtJw0KICAgICAgICBwcmludCAnJw0KICAgICAgICB0aW1lLnNsZWVwKDEpDQogICAgICAgIGxvZ19tZW51KCkNCg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50IGxvZ28NCiAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gTmFtZSArIE51bWJlciBwYXNzIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJw0KICAgIHByaW50IDQ3ICogJy0nDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMV0gUHVibGljIGlkIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bMl0gRm9sbG93ZXJzIGNsb25pbmcnDQogICAgcHJpbnQgJ1x4MWJbMTs5Mm1bM10gRmlsZSBjbG9uaW5nJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzBdIEJhY2snDQogICAgYV9zKCkNCg0KDQpkZWYgbmFtZV9jcmFjaygpOg0KICAgIGdsb2JhbCB0b2tlbg0KICAgIHRyeToNCiAgICAgICAgdG9rZW4gPSBvcGVuKCdhY2Nlc3NfdG9rZW4udHh0JywgJ3InKS5yZWFkKCkNCiAgICBleGNlcHQgKEtleUVycm9yLCBJT0Vycm9yKToNCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJ1x0IExvZ2luIEZCIGlkIHRvIGNvbnRpbnVlXHgxYlswOzk3bScNCiAgICAgICAgcHJpbnQgJycNCiAgICAgICAgdGltZS5zbGVlcCgxKQ0KICAgICAgICBsb2dfbWVudSgpDQoNCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICBwcmludCBsb2dvDQogICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgKyBOdW1iZXIgcGFzcyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScNCiAgICBwcmludCA0NyAqICctJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzFdIFB1YmxpYyBpZCBjbG9uaW5nJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzJdIEZvbGxvd2VycyBjbG9uaW5nJw0KICAgIHByaW50ICdceDFiWzE7OTJtWzNdIEZpbGUgY2xvbmluZycNCiAgICBwcmludCAnXHgxYlsxOzkybVtCXSBCYWNrJw0KICAgIG5fcygpDQoNCg0KZGVmIG5fcygpOg0KICAgIGlkID0gW10NCiAgICBjcHMgPSBbXQ0KICAgIG9rcyA9IFtdDQogICAgYV9zID0gcmF3X2lucHV0KCcgXHgxYlsxOzk3bVx4ZTJceDk1XHhiMFx4ZTJceDk0XHg4MGp1dHRceGUyXHg5ZVx4YTQgJykNCiAgICBpZiBhX3MgPT0gJzEnOg0KICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICBwcmludCAnXHgxYlsxOzkzbX5+fn4gTmFtZSArIE51bWJlciBwYXNzIHB1YmxpYyBjcmFja2luZyB+fn5+XHgxYlsxOzkxbScNCiAgICAgICAgcHJpbnQgNDcgKiAnLScNCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21Gb3IgZXhhbXBsZToxMjMsMTIzNCwxMjM0NSw3ODYsMTIsMTEyMlx4MWJbMTs5MW0nDQogICAgICAgIHByaW50IDQ3ICogJy0nDQogICAgICAgIHAxID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVsxXU5hbWUgKyBkaWdpdDogJykNCiAgICAgICAgcDIgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzJdTmFtZSArIGRpZ2l0OiAnKQ0KICAgICAgICBwMyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bM11OYW1lICsgZGlnaXQ6ICcpDQogICAgICAgIHA0ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs0XU5hbWUgKyBkaWdpdDogJykNCiAgICAgICAgcGFzczUgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzVdUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3M2ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs2XVBhc3N3b3JkOiAnKQ0KICAgICAgICBwYXNzNyA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bN11QYXNzd29yZDogJykNCiAgICAgICAgcGFzczggPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzhdUGFzc3dvcmQ6ICcpDQogICAgICAgIGlkdCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5M21bXHhlMlx4OThceDg1XUVudGVyIGlkOiAnKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJz9hY2Nlc3NfdG9rZW49JyArIHRva2VuKQ0KICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoci50ZXh0KQ0KICAgICAgICAgICAgeiA9IHFbJ25hbWUnXQ0KICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgICAgICBwcmludCBsb2dvDQogICAgICAgICAgICBwcmludCAnXHgxYlsxOzkzbX5+fn5OYW1lIHBhc3MgcHVibGljIGNyYWNraW5nfn5+ficNCiAgICAgICAgICAgIHByaW50ICcgXHgxYlsxOzkybUNsb25pbmcgZnJvbTogJyArIHoNCiAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgICAgICBwcmludCAnXHQgSW52YWxpZCB1c2VyIFx4MWJbMDs5N20nDQogICAgICAgICAgICByYXdfaW5wdXQoJyBceDFiWzE7OTJtUHJlc3MgZW50ZXIgdG8gdHJ5IGFnYWluICcpDQogICAgICAgICAgICBuYW1lX2NyYWNrKCkNCg0KICAgICAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nICsgaWR0ICsgJy9mcmllbmRzP2FjY2Vzc190b2tlbj0nICsgdG9rZW4pDQogICAgICAgIHogPSBqc29uLmxvYWRzKHIudGV4dCkNCiAgICAgICAgZm9yIGkgaW4gelsnZGF0YSddOg0KICAgICAgICAgICAgdWlkID0gaVsnaWQnXQ0KICAgICAgICAgICAgbmEgPSBpWyduYW1lJ10NCiAgICAgICAgICAgIG5tID0gbmEucnNwbGl0KCcgJylbMF0NCiAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQgKyAnfCcgKyBubSkNCg0KICAgIGVsaWYgYV9zID09ICcyJzoNCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgcGFzcyBmb2xsb3dlcnMgY3JhY2tpbmcgfn5+flx4MWJbMTs5MW0nDQogICAgICAgIHByaW50IDQ3ICogJy0nDQogICAgICAgIHByaW50ICcgXHgxYlsxOzkzbUZvciBleGFtcGxlOjEyMywxMjM0LDEyMzQ1LDc4NiwxMiwxMTIyXHgxYlsxOzkxbScNCiAgICAgICAgcHJpbnQgNDcgKiAnLScNCiAgICAgICAgcDEgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzFdTmFtZSArIGRpZ2l0OiAnKQ0KICAgICAgICBwMiA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bMl1OYW1lICsgZGlnaXQ6ICcpDQogICAgICAgIHAzID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVszXU5hbWUgKyBkaWdpdDogJykNCiAgICAgICAgcDQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzRdTmFtZSArIGRpZ2l0OiAnKQ0KICAgICAgICBpZHQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTNtW1x4ZTJceDk4XHg4NV1FbnRlciBpZDogJykNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJyArIGlkdCArICc/YWNjZXNzX3Rva2VuPScgKyB0b2tlbikNCiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKHIudGV4dCkNCiAgICAgICAgICAgIHogPSBxWyduYW1lJ10NCiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICAgICAgcHJpbnQgbG9nbw0KICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgcGFzcyBmb2xsb3dlcnMgY3JhY2tpbmcgfn5+ficNCiAgICAgICAgICAgIHByaW50ICcgXHgxYlsxOzkybUNsb25pbmcgZnJvbTogJyArIHoNCiAgICAgICAgZXhjZXB0IChLZXlFcnJvciwgSU9FcnJvcik6DQogICAgICAgICAgICBwcmludCAnXHQgSW52YWxpZCB1c2VyIFx4MWJbMDs5N20nDQogICAgICAgICAgICByYXdfaW5wdXQoJ1x4MWJbMTs5Mm1QcmVzcyBlbnRlciB0byB0cnkgYWdhaW4gJykNCiAgICAgICAgICAgIGF1dG9fY3JhY2soKQ0KDQogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycgKyBpZHQgKyAnL3N1YnNjcmliZXJzP2FjY2Vzc190b2tlbj0nICsgdG9rZW4gKyAnJmxpbWl0PTk5OTk5OScpDQogICAgICAgIHogPSBqc29uLmxvYWRzKHIudGV4dCkNCiAgICAgICAgZm9yIGkgaW4gelsnZGF0YSddOg0KICAgICAgICAgICAgdWlkID0gaVsnaWQnXQ0KICAgICAgICAgICAgbmEgPSBpWyduYW1lJ10NCiAgICAgICAgICAgIG5tID0gbmEucnNwbGl0KCcgJylbMF0NCiAgICAgICAgICAgIGlkLmFwcGVuZCh1aWQgKyAnfCcgKyBubSkNCg0KICAgIGVsaWYgYV9zID09ICczJzoNCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgIHByaW50IGxvZ28NCiAgICAgICAgcHJpbnQgJ1x4MWJbMTs5M21+fn5+IE5hbWUgKyBOdW1iZXIgcGFzcyBGaWxlIGNyYWNraW5nIH5+fn5ceDFiWzE7OTFtJw0KICAgICAgICBwcmludCA0NyAqICctJw0KICAgICAgICBwcmludCAnXHgxYlsxOzkzbUZvciBleGFtcGxlOjEyMywxMjM0LDEyMzQ1LDc4NiwxMiwxMTIyXHgxYlsxOzkxbScNCiAgICAgICAgcHJpbnQgNDcgKiAnLScNCiAgICAgICAgcDEgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzFdTmFtZSArIGRpZ2l0OiAnKQ0KICAgICAgICBwMiA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bMl1OYW1lICsgZGlnaXQ6ICcpDQogICAgICAgIHAzID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVszXU5hbWUgKyBkaWdpdDogJykNCiAgICAgICAgcDQgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzRdTmFtZSArIGRpZ2l0OiAnKQ0KICAgICAgICBwYXNzNSA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bNV1QYXNzd29yZDogJykNCiAgICAgICAgcGFzczYgPSByYXdfaW5wdXQoJyBceDFiWzE7OTJtWzZdUGFzc3dvcmQ6ICcpDQogICAgICAgIHBhc3M3ID0gcmF3X2lucHV0KCcgXHgxYlsxOzkybVs3XVBhc3N3b3JkOiAnKQ0KICAgICAgICBwYXNzOCA9IHJhd19pbnB1dCgnIFx4MWJbMTs5Mm1bOF1QYXNzd29yZDogJykNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgaWRsaXN0ID0gcmF3X2lucHV0KCdbK10gRmlsZSBOYW1lOiAnKQ0KICAgICAgICAgICAgZm9yIGxpbmUgaW4gb3BlbihpZGxpc3QsICdyJykucmVhZGxpbmVzKCk6DQogICAgICAgICAgICAgICAgaWQuYXBwZW5kKGxpbmUuc3RyaXAoKSkNCg0KICAgICAgICBleGNlcHQgSU9FcnJvcjoNCiAgICAgICAgICAgIHByaW50ICdbIV0gRmlsZSBOb3QgRm91bmQuJw0KICAgICAgICAgICAgcmF3X2lucHV0KCdQcmVzcyBFbnRlciBUbyBCYWNrLiAnKQ0KICAgICAgICAgICAgY3JhY2soKQ0KDQogICAgZWxpZiBhX3MgPT0gJzAnOg0KICAgICAgICBtZW51KCkNCiAgICBlbHNlOg0KICAgICAgICBwcmludCAnJw0KICAgICAgICBwcmludCAnXHRDaG9vc2UgdmFsaWQgb3B0aW9uJyArIHcNCiAgICAgICAgYV9zKCkNCiAgICBwcmludCAnIFRvdGFsIGlkczogJyArIHN0cihsZW4oaWQpKQ0KICAgIHRpbWUuc2xlZXAoMC41KQ0KICAgIHByaW50ICcgXHgxYlsxOzk3bUNyYWNrIFJ1bm5pbmdceDFiWzE7OTFtICcNCiAgICB0aW1lLnNsZWVwKDAuNSkNCiAgICBwcmludCA0NyAqICctJw0KICAgIHByaW50ICdcdFx4MWJbMTs5NG1KdXR0IEtpbmcgT2YgRmFjZWJvb2tceDFiWzE7OTFtJw0KICAgIHByaW50IDQ3ICogJy0nDQoNCiAgICBkZWYgbWFpbihhcmcpOg0KICAgICAgICB1c2VyID0gYXJnDQogICAgICAgIHVpZCwgbmFtZSA9IHVzZXIuc3BsaXQoJ3wnKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBwYXNzMSA9IG5hbWUubG93ZXIoKSArIHAxDQogICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMSwgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMSArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMSArICdcbicpDQogICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczEpDQogICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczENCiAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczEgKyAnXG4nKQ0KICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKHVpZCArIHBhc3MxKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBwYXNzMiA9IG5hbWUubG93ZXIoKSArIHAyDQogICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczIsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczIgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzMiArICdcbicpDQogICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMikNCiAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3MyDQogICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczIgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczIpDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgcGFzczMgPSBuYW1lLmxvd2VyKCkgKyBwMw0KICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzMywgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgaWYgJ2xvYycgaW4gcToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzMyArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgIG9rLndyaXRlKHVpZCArICcgfCAnICsgcGFzczMgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzMykNCiAgICAgICAgICAgICAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsnZXJyb3InXToNCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczMNCiAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICBjcC53cml0ZSh1aWQgKyAnIHwgJyArIHBhc3MzICsgJ1xuJykNCiAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBlbmQodWlkICsgcGFzczMpDQogICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICBwYXNzNCA9IG5hbWUubG93ZXIoKSArIHA0DQogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNCwgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzNCArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNCArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczQpDQogICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczQgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNCkNCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczUsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczUgKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNSArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzNSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M1DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczUgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M1KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9hdXRoP2lkPScgKyB1aWQgKyAnJnBhc3M9JyArIHBhc3M2LCBoZWFkZXJzPWhlYWRlcikudGV4dA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBxID0ganNvbi5sb2FkcyhkYXRhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTs5Mm1bSlVUVC1PS10gXHgxYlsxOzMybScgKyB1aWQgKyAnIHwgJyArIHBhc3M2ICsgJ1x4MWJbMDs5N20nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvayA9IG9wZW4oJy9zZGNhcmQvaWRzL0pVVFRfT0sudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNiArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvay5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVpZCArIHBhc3M2KQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgJ1x4MWJbMTszMTsxbVtKVVRULUNQXSAnICsgdWlkICsgJyB8ICcgKyBwYXNzNg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AgPSBvcGVuKCdKVVRUX0NQLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczYgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3AuY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3BzLmFwcHBlbmQodWlkICsgcGFzczYpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwOi8vbG9jYWxob3N0OjUwMDAvYXV0aD9pZD0nICsgdWlkICsgJyZwYXNzPScgKyBwYXNzNywgaGVhZGVycz1oZWFkZXIpLnRleHQNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWRzKGRhdGEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7OTJtW0pVVFQtT0tdIFx4MWJbMTszMm0nICsgdWlkICsgJyB8ICcgKyBwYXNzNyArICdceDFiWzA7OTdtJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rID0gb3BlbignL3NkY2FyZC9pZHMvSlVUVF9PSy50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzNyArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2suY2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodWlkICsgcGFzczcpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICdceDFiWzE7MzE7MW1bSlVUVC1DUF0gJyArIHVpZCArICcgfCAnICsgcGFzczcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcCA9IG9wZW4oJ0pVVFRfQ1AudHh0JywgJ2EnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczcgKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcHMuYXBwcGVuZCh1aWQgKyBwYXNzNykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgnaHR0cDovL2xvY2FsaG9zdDo1MDAwL2F1dGg/aWQ9JyArIHVpZCArICcmcGFzcz0nICsgcGFzczgsIGhlYWRlcnM9aGVhZGVyKS50ZXh0DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZHMoZGF0YSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnbG9jJyBpbiBxOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzkybVtKVVRULU9LXSBceDFiWzE7MzJtJyArIHVpZCArICcgfCAnICsgcGFzczggKyAnXHgxYlswOzk3bScNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sgPSBvcGVuKCcvc2RjYXJkL2lkcy9KVVRUX09LLnR4dCcsICdhJykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2sud3JpdGUodWlkICsgJyB8ICcgKyBwYXNzOCArICdcbicpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rLmNsb3NlKCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1aWQgKyBwYXNzOCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWydlcnJvciddOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAnXHgxYlsxOzMxOzFtW0pVVFQtQ1BdICcgKyB1aWQgKyAnIHwgJyArIHBhc3M4DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwID0gb3BlbignSlVUVF9DUC50eHQnLCAnYScpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwLndyaXRlKHVpZCArICcgfCAnICsgcGFzczggKyAnXG4nKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcC5jbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNwcy5hcHBwZW5kKHVpZCArIHBhc3M4KQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCiAgICBwID0gVGhyZWFkUG9vbCgzMCkNCiAgICBwLm1hcChtYWluLCBpZCkNCiAgICBwcmludCA0NyAqICctJw0KICAgIHByaW50ICcgXHgxYlsxOzkybUNyYWNrIERvbmUnDQogICAgcHJpbnQgJyBceDFiWzE7OTJtVG90YWwgT2svQ3A6JyArIHN0cihsZW4ob2tzKSkgKyAnLycgKyBzdHIobGVuKGNwcykpDQogICAgcHJpbnQgNDcgKiAnLScNCiAgICByYXdfaW5wdXQoJyBceDFiWzE7OTNtUHJlc3MgZW50ZXIgdG8gYmFjaycpDQogICAgYXV0b19jcmFjaygpDQoNCg0KaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoNCiAgICByZWcoKQ0K"))